#include "CProxy.h"
#include "CControlComponent.h"
#include "CThread.h"
#include "CMessage.h"
#include <iostream>

#define LINE std::cout<<"---------------------------------------"<<std::endl;

void testExperimentLogic();
void testControlTest();
void testJump();

int main()
{
	testJump();

	return 0;
}
void testJump()
{
	CControlComponent myComponent;
	LINE;
	CMessage msg(EEvent::INIT);
	myFSM.dispatch(msg);
	msg = CMessage(EEvent::RUN_JUMP_TEST);
	myFSM.dispatch(msg);
	CMessage timer(EEvent::TIMER_TICK);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	msg = CMessage(EEvent::CLIENT_DISCONNECT);
	myFSM.dispatch(msg);
}
void testControlTest()
{
	CControlFSM myFSM;
	LINE;
	CMessage msg(EEvent::INIT);
	myFSM.dispatch(msg);
	CMessage timer(EEvent::TIMER_TICK);
	msg = CMessage(EEvent::RUN_CONTROL_TEST);
	myFSM.dispatch(msg);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	myFSM.dispatch(timer);
	msg = CMessage(EEvent::CLIENT_DISCONNECT);
	myFSM.dispatch(msg);
}
void testExperimentLogic()
{
	CControlFSM myFSM;
	LINE;
	CMessage msg(EEvent::INIT);
	CMessage timer(EEvent::TIMER_TICK);
	myFSM.dispatch(msg);
	msg = CMessage(EEvent::RUN_SENSOR_MEASUREMENT);
	myFSM.dispatch(msg);
	myFSM.dispatch(timer);
	CMessage clientDC = CMessage(EEvent::CLIENT_DISCONNECT);
	myFSM.dispatch(clientDC);

	LINE

	msg = CMessage(EEvent::RUN_ADC_MEASUREMENT);
	myFSM.dispatch(msg);
	msg = CMessage(EEvent::SET_TORQUE);
	myFSM.dispatch(msg);
	myFSM.dispatch(timer);
	myFSM.dispatch(clientDC);

	LINE

	msg = CMessage(EEvent::RUN_CPSI_IDENTIFICATION);
	myFSM.dispatch(msg);
	msg = CMessage(EEvent::SET_TORQUE);
	myFSM.dispatch(msg);
	myFSM.dispatch(timer);
	myFSM.dispatch(clientDC);

	LINE

	msg = CMessage(EEvent::RUN_CPHI_IDENTIFICATION);
	myFSM.dispatch(msg);
	myFSM.dispatch(timer);
	myFSM.dispatch(clientDC);
}
