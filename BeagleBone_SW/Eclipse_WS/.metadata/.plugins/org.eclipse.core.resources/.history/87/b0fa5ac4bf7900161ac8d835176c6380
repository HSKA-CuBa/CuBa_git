//12.9.16, Michael Meindl
#include "CControlComponent.h"
#include <iostream>
#include <unistd.h>

CControlComponent::CControlComponent(TQueue<Config::QueueSize>& rxQueue,
									 TQueue<Config::QueueSize>& txQueue) :
									 	 AComponentBase(rxQueue, txQueue, true)
{

}
void CControlComponent::init()
{
	std::cout << "Control-Component: init()" << std::endl;
}
void CControlComponent::run()
{
	CMessage msg;
	while(true)
	{
		if(true == mStandbyState)
		{
			if(mRxQueue.getMessage(msg, true))
			{
				if(msg.getEvent() == EEvent::EV_REQUEST_RUN)
				{
					std::cout << "Control-Component: Switching from standby to running." << std::endl;
					mStandbyState = false;
				}
			}
		}
		else
		{
			sleep(1);
		}
	}
}
